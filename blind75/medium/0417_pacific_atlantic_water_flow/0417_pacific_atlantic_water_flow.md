# 🧩 問題名: [417. Pacific Atlantic Water Flow](https://leetcode.com/problems/pacific-atlantic-water-flow/)

## 📝 問題概要

m x n の島があり、左端と上端が **太平洋 (Pacific Ocean)**、右端と下端が **大西洋 (Atlantic Ocean)** に接している。  
島はグリッドで表され、各マス `heights[r][c]` はその地点の標高を表す。  

水は次の条件で流れる：  
- 上下左右に隣接するセルへ移動できる  
- ただし、**移動先の高さ ≤ 現在の高さ** の場合のみ  

雨が降ったとき、**そのセルから水が太平洋と大西洋の両方に流れ着くことができる座標**をすべて求めよ。  

### 🔍 例
Input:  
heights = [
[1,2,2,3,5],
[3,2,3,4,4],
[2,4,5,3,1],
[6,7,1,4,5],
[5,1,1,2,4]
]`
Output:  [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]

---

## ✅ 解法方針（Approach）

### 💡 コアアイデア
- 各セルから「両方の海に到達できるか？」を判定するのは効率が悪い (O((mn)²) の可能性)。  
- 発想を逆転し、**海から逆流する形で到達可能なセルを探索する**。  
    - 太平洋からスタート → 逆に「水が流れてこれるセル」を DFS/BFS で探索  
    - 大西洋からスタート → 同様に探索  
- 両方の探索で到達可能だったセルが答えになる。  

### 🚀 手順
1. `pacific_reachable`, `atlantic_reachable` の2つの集合を用意  
2. 太平洋に接するセルから DFS/BFS を開始し、「逆に水が流れられるセル（高さが大きい or 等しい）」をマーク  
3. 大西洋に接するセルから同様に探索  
4. `pacific_reachable ∩ atlantic_reachable` が答えとなる  

---

## ⏱️ 計算量
- 時間計算量: **O(mn)**  
  各セルは最大 2 回（Pacific / Atlantic）しか訪問されない  
- 空間計算量: **O(mn)**（visited セットや再帰スタック）

---

## 🧠 ポイントと学び
- **逆方向からの探索**（海から陸へ）が計算量を劇的に削減する典型パターン。  
- DFS と BFS はどちらでも実装可能だが、再帰制限に注意（Python なら BFS か iterative DFS が安全）。  
- 「2つの条件を満たすセル」を求めるときは、**2回の探索＋交差 (intersection)** で解くのが定石。

---

## 📈 提出結果（例）
- Runtime: 35ms (Beats 90.19%)  
- Memory: 13.994MB (Beats 46.45%)

